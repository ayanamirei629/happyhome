{"remainingRequest":"C:\\Users\\Yingge Hu\\Desktop\\VS CODE\\local\\happyhome\\happyhome\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yingge Hu\\Desktop\\VS CODE\\local\\happyhome\\happyhome\\docs\\.vuepress\\components\\Sakura.vue?vue&type=style&index=0&id=945f9a14&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Yingge Hu\\Desktop\\VS CODE\\local\\happyhome\\happyhome\\docs\\.vuepress\\components\\Sakura.vue","mtime":1667894128785},{"path":"C:\\Users\\Yingge Hu\\Desktop\\VS CODE\\local\\happyhome\\happyhome\\node_modules\\css-loader\\dist\\cjs.js","mtime":1667668880128},{"path":"C:\\Users\\Yingge Hu\\Desktop\\VS CODE\\local\\happyhome\\happyhome\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1667668880845},{"path":"C:\\Users\\Yingge Hu\\Desktop\\VS CODE\\local\\happyhome\\happyhome\\node_modules\\postcss-loader\\src\\index.js","mtime":1667668880198},{"path":"C:\\Users\\Yingge Hu\\Desktop\\VS CODE\\local\\happyhome\\happyhome\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667668880112},{"path":"C:\\Users\\Yingge Hu\\Desktop\\VS CODE\\local\\happyhome\\happyhome\\node_modules\\vue-loader\\lib\\index.js","mtime":1667668880643}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQojY2FudmFzX3Nha3VyYSB7DQogIHBvaW50ZXItZXZlbnRzOiBub25lOw0KICBwb3NpdGlvbjogZml4ZWQ7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCn0NCg=="},{"version":3,"sources":["Sakura.vue"],"names":[],"mappings":";AA4LA;AACA;AACA;AACA;AACA;AACA","file":"Sakura.vue","sourceRoot":"docs/.vuepress/components","sourcesContent":["<template>\r\n  <div class=\"Sakura\">\r\n    <canvas id=\"canvas_sakura\" ref=\"canvas_sakura\" :style=\"{ zIndex: zIndex }\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nclass Sakura {\r\n  constructor(x, y, s, r, fn, that, img) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.s = s;\r\n    this.r = r;\r\n    this.fn = fn;\r\n    this.that = that;\r\n    this.img = img;\r\n  }\r\n  draw (cxt) {\r\n    cxt.save();\r\n    // eslint-disable-next-line no-unused-vars\r\n    var xc = 40 * this.s / 4;\r\n    cxt.translate(this.x, this.y);\r\n    cxt.rotate(this.r);\r\n    cxt.drawImage(this.img, 0, 0, 40 * this.s, 40 * this.s)\r\n    cxt.restore();\r\n  }\r\n  update () {\r\n    this.x = this.fn.x(this.x, this.y);\r\n    this.y = this.fn.y(this.y, this.y);\r\n    this.r = this.fn.r(this.r);\r\n    if (this.x > window.innerWidth ||\r\n      this.x < 0 ||\r\n      this.y > window.innerHeight ||\r\n      this.y < 0\r\n    ) {\r\n      this.r = this.that.getRandom('fnr');\r\n      if (Math.random() > 0.4) {\r\n        this.x = this.that.getRandom('x');\r\n        this.y = 0;\r\n        this.s = this.that.getRandom('s');\r\n        this.r = this.that.getRandom('r');\r\n      } else {\r\n        this.x = window.innerWidth;\r\n        this.y = this.that.getRandom('y');\r\n        this.s = this.that.getRandom('s');\r\n        this.r = this.that.getRandom('r');\r\n      }\r\n    }\r\n  }\r\n}\r\nclass SakuraList {\r\n  constructor() {\r\n    this.list = []\r\n  }\r\n  push (sakura) {\r\n    this.list.push(sakura);\r\n  }\r\n  update () {\r\n    for (var i = 0, len = this.list.length; i < len; i++) {\r\n      this.list[i].update();\r\n    }\r\n  }\r\n  draw (cxt) {\r\n    for (var i = 0, len = this.list.length; i < len; i++) {\r\n      this.list[i].draw(cxt);\r\n    }\r\n  }\r\n  get (i) {\r\n    return this.list[i];\r\n  }\r\n  size () {\r\n    return this.list.length;\r\n  }\r\n}\r\nexport default {\r\n  // eslint-disable-next-line vue/multi-word-component-names\r\n  name: 'Sakura',\r\n  data () {\r\n    return {\r\n      staticx: false,\r\n      stop: null,\r\n      num: 50,\r\n      show: true,\r\n      zIndex: 0,\r\n    }\r\n  },\r\n  mounted () {\r\n    this.$nextTick(() => {\r\n      if (this.show) {\r\n        this.startSakura()\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    getRandom (option) {\r\n      var ret, random;\r\n      switch (option) {\r\n        case 'x':\r\n          ret = Math.random() * window.innerWidth;\r\n          break;\r\n        case 'y':\r\n          ret = Math.random() * window.innerHeight;\r\n          break;\r\n        case 's':\r\n          ret = Math.random();\r\n          break;\r\n        case 'r':\r\n          ret = Math.random() * 6;\r\n          break;\r\n        case 'fnx':\r\n          random = -0.5 + Math.random() * 1;\r\n          // eslint-disable-next-line no-unused-vars\r\n          ret = function (x, y) {\r\n            return x + 0.15 * random - 1.7 * 0.3;\r\n          };\r\n          break;\r\n        case 'fny':\r\n          random = 1.5 + Math.random() * 0.7\r\n          ret = function (x, y) {\r\n            return y + 0.3 * random;\r\n          };\r\n          break;\r\n        case 'fnr':\r\n          random = Math.random() * 0.03;\r\n          ret = function (r) {\r\n            return r + random;\r\n          };\r\n          break;\r\n      }\r\n      return ret;\r\n    },\r\n    startSakura () {\r\n      let that = this\r\n      // eslint-disable-next-line no-global-assign\r\n      requestAnimationFrame = window.requestAnimationFrame ||\r\n        window.mozRequestAnimationFrame ||\r\n        window.webkitRequestAnimationFrame ||\r\n        window.msRequestAnimationFrame ||\r\n        window.oRequestAnimationFrame;\r\n      var canvas = document.getElementById('canvas_sakura');\r\n      this.staticx = true;\r\n      this.$refs.canvas_sakura.width = window.innerWidth;\r\n      this.$refs.canvas_sakura.height = window.innerHeight;\r\n      var cxt = this.$refs.canvas_sakura.getContext('2d');\r\n      var sakuraList = new SakuraList();\r\n      const img = new Image();\r\n\r\n      img.src = 'https://cdn.jsdelivr.net/gh/nineya/blog_file/images/yinghua/yinghua.png'; //樱花效果图相对路径\r\n\r\n      for (var i = 0; i < that.num; i++) {\r\n        let sakura, randomX, randomY, randomS, randomR, randomFnx, randomFny, randomFnR;\r\n        randomX = this.getRandom('x');\r\n        randomY = this.getRandom('y');\r\n        randomR = this.getRandom('r');\r\n        randomS = this.getRandom('s');\r\n        randomFnx = this.getRandom('fnx');\r\n        randomFny = this.getRandom('fny');\r\n        randomFnR = this.getRandom('fnr');\r\n        sakura = new Sakura(randomX, randomY, randomS, randomR, {\r\n          x: randomFnx,\r\n          y: randomFny,\r\n          r: randomFnR\r\n        }, this, img);\r\n        sakura.draw(cxt);\r\n        sakuraList.push(sakura);\r\n      }\r\n      this.stop = requestAnimationFrame(function fn () {\r\n        cxt.clearRect(0, 0, canvas.width, canvas.height);\r\n        sakuraList.update();\r\n        sakuraList.draw(cxt);\r\n        that.stop = requestAnimationFrame(fn);\r\n      })\r\n    },\r\n    stopp () {\r\n      if (this.staticx) {\r\n        var child = document.getElementById(\"canvas_sakura\");\r\n        child.parentNode.removeChild(child);\r\n        window.cancelAnimationFrame(this.stop);\r\n        this.staticx = false;\r\n      } else {\r\n        this.startSakura();\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#canvas_sakura {\r\n  pointer-events: none;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n</style>\r\n"]}]}